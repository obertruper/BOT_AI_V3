bybit:
  hedge_mode: true
  sl_trigger_by: LastPrice
  tp_trigger_by: LastPrice
  websocket_topics:
  - position
  - execution
  - order
  - wallet
enhanced_sltp:
  enabled: true

  # Синхронизация с биржей
  synchronization:
    enabled: true
    interval: 30  # секунды
    max_attempts: 5
    priority: "exchange"

  # Трейлинг-стоп (адаптировано из V2)
  trailing_stop:
    enabled: true
    activation_percent: 1.0  # Активируется при 1% прибыли
    step_percent: 0.5  # Шаг трейлинга 0.5%
    min_distance: 0.3  # Минимальное расстояние от цены
    use_adaptive_step: true
    volatility_factor: 1.0
    max_updates: 15

    # Адаптивные настройки
    adaptive:
      enabled: true
      max_step: 2.0
      min_step: 0.3

  # Защита прибыли (адаптировано из V2)
  profit_protection:
    enabled: true
    breakeven_percent: 0.5  # Безубыток при 0.5% прибыли
    breakeven_offset: 0.1  # Смещение от цены входа

    # Уровни фиксации прибыли
    levels:
      - trigger: 1.0  # При 1% прибыли
        lock: 0.5     # Фиксируем 0.5% прибыли
      - trigger: 2.0  # При 2% прибыли
        lock: 1.0     # Фиксируем 1% прибыли
      - trigger: 3.0  # При 3% прибыли
        lock: 1.5     # Фиксируем 1.5% прибыли
    max_updates: 5

  # Частичное закрытие (адаптировано из V2)
  partial_take_profit:
    enabled: true
    levels:
      - percent: 1.0  # При 1% прибыли
        close_ratio: 0.3  # Закрываем 30% позиции
      - percent: 2.0  # При 2% прибыли
        close_ratio: 0.3  # Закрываем еще 30% позиции
      - percent: 3.0  # При 3% прибыли
        close_ratio: 0.4  # Закрываем оставшиеся 40% позиции
    update_sl_after_partial: true
    move_sl_to_breakeven: true

  # Корректировка на основе волатильности
  volatility_adjustment:
    enabled: false  # Отключено для тестирования
    atr_period: 14
    sl_multiplier: 1.5
    tp_multiplier: 2.5

  # Временная корректировка
  time_based_adjustment:
    enabled: false  # Отключено для тестирования
    time_thresholds:
      - hours: 4
        sl_tighten: 0.3
        tp_extension: 0.0
      - hours: 12
        sl_tighten: 0.5
        tp_extension: 0.0
      - hours: 24
        sl_tighten: 0.8
        tp_extension: 0.0
position_tracking:
  order_check_interval: 5
  pnl_update_interval: 10
  sync_interval: 60
