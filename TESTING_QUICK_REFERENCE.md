# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é BOT_AI_V3

## ‚ö° –°–∞–º—ã–µ –≤–∞–∂–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å)

### üéØ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
```bash
# 1. –í–°–ï–ì–î–ê –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å venv –ø–µ—Ä–≤—ã–º!
source venv/bin/activate

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest --cov=. --cov-report=html

# 3. –û—Ç–∫—Ä—ã—Ç—å –æ—Ç—á–µ—Ç –ø–æ–∫—Ä—ã—Ç–∏—è
open htmlcov/index.html  # Mac
xdg-open htmlcov/index.html  # Linux
```

### üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
- **–ü–æ–∫—Ä—ã—Ç–∏–µ**: 8% ‚úÖ
- **–¢–µ—Å—Ç–æ–≤**: 80+ ‚úÖ
- **–¶–µ–ª—å**: 90%+ üéØ

## üî• –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# === –ë–ê–ó–û–í–´–ï –ö–û–ú–ê–ù–î–´ ===

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –í–°–ï —Ç–µ—Å—Ç—ã
pytest

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç—è–º–∏
pytest -v

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª
pytest tests/unit/test_basic_functionality.py

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ unit —Ç–µ—Å—Ç—ã
pytest tests/unit/

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ integration —Ç–µ—Å—Ç—ã
pytest tests/integration/

# === –ü–û–ö–†–´–¢–ò–ï –ö–û–î–ê ===

# HTML –æ—Ç—á–µ—Ç (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)
pytest --cov=. --cov-report=html

# –û—Ç—á–µ—Ç –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏
pytest --cov=. --cov-report=term-missing

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–æ–¥—É–ª—è
pytest --cov=trading tests/

# === –û–¢–õ–ê–î–ö–ê ===

# –ü–æ–∫–∞–∑–∞—Ç—å print() –≤—ã–≤–æ–¥—ã
pytest -s

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –Ω–∞ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–µ
pytest -x

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ —É–ø–∞–≤—à–∏–µ —Ç–µ—Å—Ç—ã
pytest --lf

# –ü–æ–∫–∞–∑–∞—Ç—å 10 —Å–∞–º—ã—Ö –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
pytest --durations=10

# === –ü–ê–†–ê–õ–õ–ï–õ–¨–ù–´–ô –ó–ê–ü–£–°–ö ===

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å (–æ–¥–∏–Ω —Ä–∞–∑)
pip install pytest-xdist

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞ –≤—Å–µ—Ö —è–¥—Ä–∞—Ö
pytest -n auto

# === –§–ò–õ–¨–¢–†–ê–¶–ò–Ø –¢–ï–°–¢–û–í ===

# –ü–æ –∏–º–µ–Ω–∏
pytest -k "test_import"

# –ü–æ –º–∞—Ä–∫–µ—Ä–∞–º
pytest -m "not slow"
pytest -m integration
pytest -m requires_db
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤ (–≥–¥–µ —á—Ç–æ –ª–µ–∂–∏—Ç)

```
tests/
‚îú‚îÄ‚îÄ unit/                              # –ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ test_basic_functionality.py   ‚≠ê # –û—Å–Ω–æ–≤–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã –∏ –±–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ test_imports_only.py         ‚≠ê # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∏–º–ø–æ—Ä—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ test_system_components.py    ‚≠ê # –°–∏—Å—Ç–µ–º–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ test_utilities_and_indicators.py ‚≠ê # –£—Ç–∏–ª–∏—Ç—ã –∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
‚îú‚îÄ‚îÄ integration/                       # –¢–µ—Å—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îî‚îÄ‚îÄ performance/                       # –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```

## üõ†Ô∏è Unified Test Runner (–ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

```bash
# –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (—Ç–µ—Å—Ç—ã + –ø–æ–∫—Ä—ã—Ç–∏–µ + –æ—Ç—á–µ—Ç—ã)
python3 scripts/unified_test_runner.py --mode=full

# –¢–æ–ª—å–∫–æ —Ç–µ—Å—Ç—ã
python3 scripts/unified_test_runner.py --mode=tests

# –¢–æ–ª—å–∫–æ –ø–æ–∫—Ä—ã—Ç–∏–µ
python3 scripts/unified_test_runner.py --mode=coverage
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

```bash
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –í–°–ï –∫–æ–º–∞–Ω–¥—ã:
source venv/bin/activate
black . && ruff check --fix .
pytest tests/unit/ --cov=. --cov-report=term-missing
git diff --staged | grep -i "api_key\|secret\|password"
```

## üÜò –†–µ—à–µ–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –ø—Ä–æ–±–ª–µ–º

### ‚ùå ImportError
```bash
source venv/bin/activate
pip install -r requirements.txt
```

### ‚ùå PostgreSQL connection failed
```bash
# –í–ê–ñ–ù–û: –ü–æ—Ä—Ç 5555, –ù–ï 5432!
psql -p 5555 -U obertruper -d bot_trading_v3
```

### ‚ùå Async test not running
```bash
pip install pytest-asyncio
```

### ‚ùå Coverage –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```bash
pip install --upgrade pytest-cov
rm -rf .pytest_cache htmlcov .coverage
```

## üìà –ö–∞–∫ —É–≤–µ–ª–∏—á–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ?

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
1. `trading/engine.py` - –¢–æ—Ä–≥–æ–≤—ã–π –¥–≤–∏–∂–æ–∫ (–∫—Ä–∏—Ç–∏—á–Ω–æ!)
2. `ml/ml_manager.py` - ML —Å–∏—Å—Ç–µ–º–∞
3. `trading/orders/order_manager.py` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–∞–º–∏
4. `risk_management/manager.py` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏
5. `exchanges/bybit/client.py` - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∏—Ä–∂–µ–π

### –®–∞–±–ª–æ–Ω –Ω–æ–≤–æ–≥–æ —Ç–µ—Å—Ç–∞ (–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å):

```python
"""–¢–µ—Å—Ç—ã –¥–ª—è –º–æ–¥—É–ª—è XXX"""

import pytest
from unittest.mock import Mock
import sys
import os

sys.path.insert(0, os.path.dirname(os.path.dirname(os.path.dirname(__file__))))


class TestMyModule:
    """–¢–µ—Å—Ç—ã –¥–ª—è MyModule"""
    
    def test_basic_import(self):
        """–¢–µ—Å—Ç –∏–º–ø–æ—Ä—Ç–∞"""
        from my.module import MyClass
        assert MyClass is not None
    
    def test_basic_functionality(self):
        """–¢–µ—Å—Ç –±–∞–∑–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏"""
        from my.module import my_function
        result = my_function(1, 2)
        assert result == 3


if __name__ == "__main__":
    pytest.main([__file__, "-v"])
```

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

| –ú–µ—Ç—Ä–∏–∫–∞ | –¢–µ–∫—É—â–µ–µ | –¶–µ–ª—å | –°—Ç–∞—Ç—É—Å |
|---------|---------|------|--------|
| –û–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ | 8% | 90% | üî¥ |
| Unit —Ç–µ—Å—Ç—ã | 80+ | 500+ | üü° |
| Integration —Ç–µ—Å—Ç—ã | 3 | 50+ | üî¥ |
| Performance —Ç–µ—Å—Ç—ã | 4 | 20+ | üî¥ |
| –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è | <10s | <30s | üü¢ |

## üéØ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ?

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Å–µ–π—á–∞—Å:**
   ```bash
   source venv/bin/activate
   pytest --cov=. --cov-report=html
   ```

2. **–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ:**
   - –û—Ç–∫—Ä—ã—Ç—å `htmlcov/index.html`
   - –ù–∞–π—Ç–∏ —Ñ–∞–π–ª—ã —Å 0% –ø–æ–∫—Ä—ã—Ç–∏—è
   - –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–∏—Ö

3. **–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–µ—Å—Ç:**
   - –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω –≤—ã—à–µ
   - –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –≤ `tests/unit/test_–≤–∞—à_–º–æ–¥—É–ª—å.py`
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å: `pytest tests/unit/test_–≤–∞—à_–º–æ–¥—É–ª—å.py -v`

---

üí° **–°–æ–≤–µ—Ç**: –ù–∞—á–Ω–∏—Ç–µ —Å –ø—Ä–æ—Å—Ç—ã—Ö –∏–º–ø–æ—Ä—Ç-—Ç–µ—Å—Ç–æ–≤ - –æ–Ω–∏ –±—ã—Å—Ç—Ä–æ —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç –ø–æ–∫—Ä—ã—Ç–∏–µ!

üìö **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: `docs/TESTING_DOCUMENTATION.md`

‚è±Ô∏è **–û–±–Ω–æ–≤–ª–µ–Ω–æ**: 17 –∞–≤–≥—É—Å—Ç–∞ 2025