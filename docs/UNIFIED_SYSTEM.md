# üöÄ –ï–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—Å–∫–∞ BOT_AI_V3

## –û–±–∑–æ—Ä

–ï–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—Å–∫–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ BOT_AI_V3 –∏–∑ –æ–¥–Ω–æ–π —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞. –≠—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —Ç–æ—Ä–≥–æ–≤—ã–π –¥–≤–∏–∂–æ–∫, ML —Å–∏—Å—Ç–µ–º—É, Web API –∏ Frontend –≤ –µ–¥–∏–Ω—É—é —É–ø—Ä–∞–≤–ª—è–µ–º—É—é —Å–∏—Å—Ç–µ–º—É.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
unified_launcher.py
    ‚îú‚îÄ‚îÄ ProcessManager          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
    ‚îÇ   ‚îú‚îÄ‚îÄ Core Process       # –¢–æ—Ä–≥–æ–≤—ã–π –¥–≤–∏–∂–æ–∫ + ML
    ‚îÇ   ‚îú‚îÄ‚îÄ API Process        # FastAPI —Å–µ—Ä–≤–µ—Ä
    ‚îÇ   ‚îî‚îÄ‚îÄ Frontend Process   # React/Vite –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    ‚îÇ
    ‚îú‚îÄ‚îÄ HealthMonitor          # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–¥–æ—Ä–æ–≤—å—è
    ‚îÇ   ‚îú‚îÄ‚îÄ HTTP checks        # –ü—Ä–æ–≤–µ—Ä–∫–∞ endpoints
    ‚îÇ   ‚îú‚îÄ‚îÄ Process checks     # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
    ‚îÇ   ‚îî‚îÄ‚îÄ Resource metrics   # –ú–µ—Ç—Ä–∏–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤
    ‚îÇ
    ‚îî‚îÄ‚îÄ ConfigManager          # –ï–¥–∏–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        ‚îî‚îÄ‚îÄ unified_system     # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ system.yaml
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü—Ä–æ—Å—Ç–µ–π—à–∏–π –∑–∞–ø—É—Å–∫

```bash
./start_all.sh
# –í—ã–±–µ—Ä–∏—Ç–µ –ø—É–Ω–∫—Ç 0 –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –µ–¥–∏–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
```

### 2. –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫

```bash
# –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å ML
python unified_launcher.py

# –¢–æ–ª—å–∫–æ —Ç–æ—Ä–≥–æ–≤–ª—è –±–µ–∑ frontend
python unified_launcher.py --mode=core

# –¢–æ–ª—å–∫–æ API –∏ frontend
python unified_launcher.py --mode=api

# –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–±–µ–∑ –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞)
python unified_launcher.py --mode=dev
```

### 3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
python unified_launcher.py --status

# –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏
python unified_launcher.py --logs
```

## –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

### FULL (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

- ‚úÖ Core System (—Ç–æ—Ä–≥–æ–≤—ã–π –¥–≤–∏–∂–æ–∫)
- ‚úÖ ML System (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤)
- ‚úÖ Web API (REST/WebSocket)
- ‚úÖ Frontend (React Dashboard)

### CORE

- ‚úÖ Core System
- ‚úÖ ML System
- ‚ùå Web API
- ‚ùå Frontend

### API

- ‚ùå Core System
- ‚ùå ML System
- ‚úÖ Web API
- ‚úÖ Frontend

### ML

- ‚úÖ Core System
- ‚úÖ ML System
- ‚úÖ Web API
- ‚ùå Frontend

### DEV

- –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∫–∞–∫ –≤ FULL
- –û—Ç–∫–ª—é—á–µ–Ω –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –µ–¥–∏–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `config/system.yaml`:

```yaml
unified_system:
  enabled: true

  components:
    core:
      enabled: true
      auto_restart: true
      health_check_interval: 30

    ml:
      enabled: true
      integrated_with: core  # ML –≤—Å—Ç—Ä–æ–µ–Ω –≤ Core

    api:
      enabled: true
      port: 8080
      auto_restart: true
      health_check_endpoint: "http://localhost:8080/api/health"

    frontend:
      enabled: true
      port: 5173
      auto_restart: false
```

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫

- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø—Ä–∏ —Å–±–æ—è—Ö
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5)
- –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏

### üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–¥–æ—Ä–æ–≤—å—è

- HTTP health checks –¥–ª—è API endpoints
- Process-based –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ (CPU, –ø–∞–º—è—Ç—å)

### üìù –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

- –í—Å–µ –ª–æ–≥–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `logs/`
- –û—Ç–¥–µ–ª—å–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤ `logs/processes/`
- –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä —á–µ—Ä–µ–∑ `--logs`

### üõ°Ô∏è Graceful Shutdown

- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø–æ Ctrl+C
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–µ—Ä–µ–¥ –æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```bash
$ python unified_launcher.py --status

üìä –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã BOT_AI_V3
============================================================

‚úÖ CORE
  PID: 12345
  –°—Ç–∞—Ç—É—Å: running
  CPU: 15.2%
  –ü–∞–º—è—Ç—å: 256.3 MB
  Uptime: 2:15:30

‚úÖ API
  PID: 12346
  –°—Ç–∞—Ç—É—Å: running
  CPU: 5.1%
  –ü–∞–º—è—Ç—å: 128.5 MB
  Uptime: 2:15:25

‚úÖ FRONTEND
  PID: 12347
  –°—Ç–∞—Ç—É—Å: running
  CPU: 2.3%
  –ü–∞–º—è—Ç—å: 98.2 MB
  Uptime: 2:15:20
```

### Health Endpoints

- **API Health**: <http://localhost:8080/api/health>
- **Frontend**: <http://localhost:5173>
- **API Docs**: <http://localhost:8080/api/docs>

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –°–∏—Å—Ç–µ–º–∞ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:

   ```bash
   source venv/bin/activate
   pip install -r requirements.txt
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ PostgreSQL:

   ```bash
   psql -p 5555 -U obertruper -d bot_trading_v3
   ```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ ML –º–æ–¥–µ–ª–∏:

   ```bash
   ls models/saved/best_model_*.pth
   ```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:

   ```bash
   tail -f logs/processes/{component}_stderr.log
   ```

2. –û—Ç–∫–ª—é—á–∏—Ç–µ –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤ `system.yaml`

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

   ```bash
   python unified_launcher.py --mode=dev
   ```

### Frontend –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É Node.js:

   ```bash
   node --version
   npm --version
   ```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ frontend:

   ```bash
   cd web/frontend
   npm install
   ```

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏

| –§—É–Ω–∫—Ü–∏—è | start_all.sh (—Å—Ç–∞—Ä—ã–π) | integrated_start.py | unified_launcher.py |
|---------|---------------------|-------------------|-------------------|
| –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ | Bash —Å–∫—Ä–∏–ø—Ç—ã | –û–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å | ProcessManager |
| –ê–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ | ‚ùå | ‚ùå | ‚úÖ |
| Health monitoring | ‚ùå | –ß–∞—Å—Ç–∏—á–Ω–æ | ‚úÖ |
| –†–∞–∑–Ω—ã–µ —Ä–µ–∂–∏–º—ã | –ú–µ–Ω—é –≤—ã–±–æ—Ä–∞ | ‚ùå | CLI –∞—Ä–≥—É–º–µ–Ω—Ç—ã |
| –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | –†–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω–æ–µ | –û–±—ä–µ–¥–∏–Ω–µ–Ω–Ω–æ–µ | –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ |
| Graceful shutdown | –ß–∞—Å—Ç–∏—á–Ω–æ | ‚úÖ | ‚úÖ |

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ unified_launcher.py** –¥–ª—è production –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. **–†–µ–∂–∏–º DEV** –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –æ—Ç–ª–∞–¥–∫–∏
3. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏** —Ä–µ–≥—É–ª—è—Ä–Ω–æ —á–µ—Ä–µ–∑ `--logs`
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫** –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
5. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ health endpoints** –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

## –î–∞–ª—å–Ω–µ–π—à–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ

- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å systemd –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
- [ ] Web UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–æ–π
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ –≤ Prometheus/Grafana
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–±–æ—è—Ö –≤ Telegram
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
