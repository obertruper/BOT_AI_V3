# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL

## üìã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ /mnt/SSD

–ü—Ä–æ–µ–∫—Ç BOT Trading v3 –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å **–ª–æ–∫–∞–ª—å–Ω—ã–º PostgreSQL** —á–µ—Ä–µ–∑ Unix socket.

### ‚úÖ –¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: `bot_trading_v3`
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**: `obertruper`
- **–ü–∞—Ä–æ–ª—å**: `ilpnqw1234`
- **–ü–æ—Ä—Ç**: `5555` (–Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π!)
- **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**: —á–µ—Ä–µ–∑ Unix socket (–ë–ï–ó TCP/IP)

### üîß –í–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

#### 1. `.env` - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –ù–ï —É–∫–∞–∑—ã–≤–∞–µ–º PGHOST –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è!
PGPORT=5555
PGUSER=obertruper
PGPASSWORD=ilpnqw1234
PGDATABASE=bot_trading_v3
```

#### 2. `.mcp.json` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ MCP postgres —Å–µ—Ä–≤–µ—Ä–∞

```json
"postgres": {
  "env": {
    "PGPORT": "${PGPORT:-5555}",
    "PGUSER": "${PGUSER:-obertruper}",
    "PGPASSWORD": "${PGPASSWORD:-ilpnqw1234}",
    "PGDATABASE": "${PGDATABASE:-bot_trading_v3}"
  }
}
```

### üìù –ü—Ä–∏–º–µ—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ –∫–æ–¥–µ

#### Python —Å psycopg2

```python
import psycopg2

conn = psycopg2.connect(
    dbname='bot_trading_v3',
    user='obertruper',
    port='5555'
    # –ù–ï —É–∫–∞–∑—ã–≤–∞–µ–º host!
)
```

#### SQLAlchemy

```python
# –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ: @ –±–µ–∑ —Ö–æ—Å—Ç–∞ –æ–∑–Ω–∞—á–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
DATABASE_URL = "postgresql://obertruper@:5555/bot_trading_v3"
```

#### Asyncpg

```python
import asyncpg

conn = await asyncpg.connect(
    database='bot_trading_v3',
    user='obertruper',
    port=5555
    # –ù–ï —É–∫–∞–∑—ã–≤–∞–µ–º host!
)
```

### üöÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:

```bash
python3 scripts/test_local_db.py
```

–ò–ª–∏ —á–µ—Ä–µ–∑ psql:

```bash
psql -p 5555 -U obertruper -d bot_trading_v3
```

### ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–ù–ï —É–∫–∞–∑—ã–≤–∞–π—Ç–µ host** –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è - —ç—Ç–æ –∑–∞—Å—Ç–∞–≤–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TCP/IP –≤–º–µ—Å—Ç–æ Unix socket
2. **–ü–æ—Ä—Ç 5555** - –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç PostgreSQL –≤ —ç—Ç–æ–π —Å–∏—Å—Ç–µ–º–µ
3. **Unix socket** –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `/var/run/postgresql/`
4. **–õ–æ–∫–∞–ª—å–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** —Ä–∞–±–æ—Ç–∞–µ—Ç –±—ã—Å—Ç—Ä–µ–µ –∏ –Ω–∞–¥–µ–∂–Ω–µ–µ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–æ–≤ –Ω–∞ —Ç–æ–º –∂–µ –¥–∏—Å–∫–µ

### üîç –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º

–ï—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω:

   ```bash
   systemctl status postgresql
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Unix socket:

   ```bash
   ls -la /var/run/postgresql/
   ```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

   ```bash
   psql -p 5555 -U postgres -c "\du"
   ```

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 29 –∏—é–ª—è 2025*
