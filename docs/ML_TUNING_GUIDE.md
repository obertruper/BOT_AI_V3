# üéõÔ∏è –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ ML —Å–∏—Å—Ç–µ–º—ã

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–ï—Å–ª–∏ —Å–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ NEUTRAL —Å–∏–≥–Ω–∞–ª–æ–≤, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:

1. **–ò–∑–º–µ–Ω–∏—Ç—å –≤–µ—Å–∞ —Ç–∞–π–º—Ñ—Ä–µ–π–º–æ–≤** –≤ `ml/ml_manager.py`:

```python
# –¢–µ–∫—É—â–∏–µ (–∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ)
weights = [0.4, 0.3, 0.2, 0.1]

# –ë–æ–ª–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ –¥–ª—è –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏
weights = [0.6, 0.3, 0.1, 0.0]

# –ë–æ–ª–µ–µ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
weights = [0.3, 0.3, 0.2, 0.2]
```

2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ—Ä–æ–≥–∏ —Å–∏–≥–Ω–∞–ª–æ–≤**:

```python
# –¢–µ–∫—É—â–∏–µ –ø–æ—Ä–æ–≥–∏
if weighted_direction < 0.5:
    signal = "SHORT"
elif weighted_direction > 1.5:
    signal = "LONG"

# –ë–æ–ª–µ–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ—Ä–æ–≥–∏
if weighted_direction < 0.7:
    signal = "SHORT"
elif weighted_direction > 1.3:
    signal = "LONG"
```

3. **–°–Ω–∏–∑–∏—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è**:

```python
# –í ml_signal_processor.py
min_confidence = 0.35  # –ë—ã–ª–æ 0.45
min_signal_strength = 0.15  # –ë—ã–ª–æ 0.2
```

## üìä –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–∏—Ö –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π

### –ü–æ—á–µ–º—É –º–Ω–æ–≥–æ NEUTRAL —Å–∏–≥–Ω–∞–ª–æ–≤?

1. **–†–∞–∑–Ω–æ–≥–ª–∞—Å–∏–µ –º–µ–∂–¥—É —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞–º–∏**
   - –ü—Ä–∏–º–µ—Ä: [0, 0, 2, 1] = SHORT –Ω–∞ –∫–æ—Ä–æ—Ç–∫–∏—Ö, LONG –Ω–∞ —Å—Ä–µ–¥–Ω–∏—Ö
   - –í–∑–≤–µ—à–µ–Ω–Ω–æ–µ —Å—Ä–µ–¥–Ω–µ–µ = 0.5 ‚Üí NEUTRAL

2. **–ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ –ø–æ—Ä–æ–≥–∏**
   - –î–∏–∞–ø–∞–∑–æ–Ω NEUTRAL: 0.5 - 1.5 (—à–∏—Ä–æ–∫–∏–π)
   - –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –≤–∑–≤–µ—à–µ–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ–ø–∞–¥–∞—é—Ç –≤ —ç—Ç–æ—Ç –¥–∏–∞–ø–∞–∑–æ–Ω

3. **–í—ã—Å–æ–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏**
   - min_confidence = 0.45 –æ—Ç—Å–µ–∫–∞–µ—Ç —Å–ª–∞–±—ã–µ —Å–∏–≥–Ω–∞–ª—ã

## üîß –î–µ—Ç–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ç–∏–ª–µ–π —Ç–æ—Ä–≥–æ–≤–ª–∏

#### –°–∫–∞–ª—å–ø–∏–Ω–≥ (15–º - 1—á)

```python
# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–µ—Å –Ω–∞ 15–º –¥–∞–Ω–Ω—ã–µ
weights = [0.7, 0.2, 0.1, 0.0]
short_threshold = 0.8
long_threshold = 1.2
min_confidence = 0.3
```

#### –î–Ω–µ–≤–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è (1—á - 4—á)

```python
# –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Å–∞
weights = [0.2, 0.4, 0.3, 0.1]
short_threshold = 0.6
long_threshold = 1.4
min_confidence = 0.4
```

#### –°–≤–∏–Ω–≥ —Ç–æ—Ä–≥–æ–≤–ª—è (4—á - 12—á)

```python
# –í–µ—Å –Ω–∞ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —Ç—Ä–µ–Ω–¥—ã
weights = [0.1, 0.2, 0.4, 0.3]
short_threshold = 0.5
long_threshold = 1.5
min_confidence = 0.5
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Stop Loss –∏ Take Profit

```python
# –í ml_manager.py, —Ñ—É–Ω–∫—Ü–∏—è _interpret_predictions

# –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ (—Ç–µ–∫—É—â–∏–µ)
stop_loss_pct = np.clip(abs(min_return) * 100, 1.0, 5.0) / 100.0
take_profit_pct = np.clip(max_return * 100, 2.0, 10.0) / 100.0

# –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ
stop_loss_pct = np.clip(abs(min_return) * 100, 0.5, 3.0) / 100.0
take_profit_pct = np.clip(max_return * 100, 3.0, 15.0) / 100.0

# –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ (–Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏)
volatility = np.std(future_returns)
stop_loss_pct = np.clip(volatility * 2, 1.0, 5.0) / 100.0
take_profit_pct = np.clip(volatility * 4, 2.0, 10.0) / 100.0
```

### 3. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏

```python
# –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∏–≥–Ω–∞–ª —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏
direction_counts = np.bincount(directions, minlength=3)
max_agreement = direction_counts.max() / len(directions)

if max_agreement < 0.75:  # –¢—Ä–µ–±—É–µ–º 75% —Å–æ–≥–ª–∞—Å–∏—è
    signal_type = "NEUTRAL"
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

### –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

1. **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤**

   ```sql
   SELECT signal_type, COUNT(*) as count,
          COUNT(*) * 100.0 / SUM(COUNT(*)) OVER() as percentage
   FROM signals
   WHERE created_at > NOW() - INTERVAL '24 hours'
   GROUP BY signal_type;
   ```

2. **–°—Ä–µ–¥–Ω—è—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –ø–æ —Ç–∏–ø–∞–º**

   ```sql
   SELECT signal_type, AVG(confidence) as avg_confidence
   FROM signals
   WHERE created_at > NOW() - INTERVAL '24 hours'
   GROUP BY signal_type;
   ```

3. **–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π**

   ```sql
   SELECT
     extra_data->>'predictions' as predictions,
     COUNT(*) as count
   FROM signals
   WHERE created_at > NOW() - INTERVAL '1 hour'
   GROUP BY predictions
   ORDER BY count DESC;
   ```

## üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

```bash
# –°–æ–∑–¥–∞–π—Ç–µ test_ml_params.py
python test_ml_params.py --weights "0.6,0.3,0.1,0.0" --threshold 0.7
```

### 2. –ë—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥ –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
python backtest_ml_settings.py --start "2025-01-01" --end "2025-08-01"
```

### 3. A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

```python
# –ó–∞–ø—É—Å–∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
configs = [
    {"weights": [0.4, 0.3, 0.2, 0.1], "threshold": 0.5},
    {"weights": [0.6, 0.3, 0.1, 0.0], "threshold": 0.7},
    {"weights": [0.3, 0.3, 0.2, 0.2], "threshold": 0.6}
]
```

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ù–∞—á–Ω–∏—Ç–µ —Å –º–∞–ª—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π** - –º–µ–Ω—è–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ
2. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –¥–µ–º–æ** –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
3. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –º–µ—Ç—Ä–∏–∫–∏** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π
4. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è** - –≤–µ–¥–∏—Ç–µ –ª–æ–≥ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## üìù –ß–µ–∫-–ª–∏—Å—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

- [ ] –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–µ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ü–µ–ª–µ–≤–æ–π —Å—Ç–∏–ª—å —Ç–æ—Ä–≥–æ–≤–ª–∏
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–µ—Å–∞ —Ç–∞–π–º—Ñ—Ä–µ–π–º–æ–≤
- [ ] –û—Ç—Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ä–æ–≥–∏ SHORT/LONG
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã 24-48 —á–∞—Å–æ–≤
- [ ] –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

---

*–°–º. —Ç–∞–∫–∂–µ: [ML_SIGNAL_EVALUATION_SYSTEM.md](./ML_SIGNAL_EVALUATION_SYSTEM.md)*
